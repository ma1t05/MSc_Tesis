\section{Description of Components}
The components of Scatter Search template \cite{glover1998template}
consists of
specific subroutines of the following types:
\begin{itemize}
\item A Diversification Generator
\item An Improvement Method
\item A Reference Set Update Method
\item A Subset Generation Method
\end{itemize}
We described below
each of the components.

\subsection{A Diversification Generator}
To component is used to generate
a collection of diverse trial solutions,
using an arbitrary trial solution
(or seed solution) as an input.
%\input{HeuristicProcedures/alg_ss-init}
In this research
we develop a Greedy Randomized Adaptive Search Procedure (GRASP)
as a diversification generator.
GRASP \cite{feo1995greedy}
is a multi-start procedure that combines
the power of greedy heuristics and randomization.

GRASP typically consists of two phases:
a greedy randomized construction phase
and an improvement phase.
In this case,
our proposed GRASP
consist only of the construction phase
because the improvement phase
is applied in other parts
of the scatter search algorithm.
\input{HeuristicProcedures/GRASP}

\subsection{An Improvement Method}
The propose of the improvement method
is to attempt to improve the quality
of a given previously found solution.
To transform a trial solution
into one or more
enhanced trial solutions.
(If no improvement
of the input trial solution results, 
the ``enhanced'' solution
is considered to be
\todo{Add reference to procedure 2}
the same as the input solution.)

Two improvement methods are developed.
The first is an adaptation
of the method proposed by Berman et al. \cite{berman1987stochastic}
(see Appendix \ref{ch:Berman} for mode details)
and the second
is a local search procedure
described next.
%\todo[inline]{Incluir descripcion del metodo de Berman}
\input{HeuristicProcedures/LocalSearch}

\subsection{A Reference Set Update Method}
A two-tier Reference Set
is chosen to maintain both
a pool of good quality solutions
and a pool of diverse solutions.
Each tier has size \textit{b},
where \textit{b}
is typically between 20 and 40.
In addition,
%And we opt for be dynamic
%since the number
%of generated solutions
%is big (proportional to \textit{p}).
since the number of generated solutions
is relatively large,
the Reference Set is dynamically updated.

The Reference Set is update
by trying to incorporate new solutions
generated by the combination method.
%\todo{No se entiende!}
%the update method
%first try to incorporate the solutions
%by quality criteria;
Because the Reference Set is divided
in two parts,
a new trial solution
is first tested by the quality criterion.
If this trial solution
is better
than any of the solutions
in the quality tier subset
of the Reference Set,
the new solution enters the Reference Set
and the worst solution
is removed from it.
These steps are shown in Algorithm \ref{alg:rs_update}.
\input{HeuristicProcedures/alg_RefSetUpdate}

If the new solution
does not enter the Reference Set by quality
or if a solution is removed
from the quality-tier subset,
then this solution is tested
based on the diversity criterion.
If this trial solution
has a better diversity value than any of the solutions
in the diversity-tier subset,
it enters the subset and the worst solution
(from the diversity standpoint)
is removed from the subset.
Note that every time
the quality-tier subset is re-evaluated
since the value of the diversity-based solutions
depends on the quality-set subset.
As shown by the Algorithm \ref{alg:rs_updatediv}.
\input{HeuristicProcedures/alg_RefSetUpdateDiversity}

\subsection{A Subset Generation Method}
This component operates on the Reference Set,
%to produce a subset of its solutions
%as a basis for creating combined solutions.
it is used to create subsets
of solutions that are combined
by the Combination Method.
\input{HeuristicProcedures/alg_SubsetGeneration}
We only look for subsets of size two,
i.e. pairs of solutions;
because our Reference Set is dynamic,
at the beginning of each iteration
we label the solutions as new and old
to identify them,
and avoid create pairs previous combined.
To generate the pairs
we use
a new solution with another new solution,
%\todo{Refrasear}
after
if there are old solutions
we make pairs
with a new solution
and an old solution.

Is important to notice that
the new solutions that enters in the Reference Set
at the current iteration
are not part of the subsets
until the next iteration.

\subsection{A Solution Combination Method}
With this component,
our scatter search
transforms a given subset of solutions 
produced by the Subset Generation Method
into
one or more combined solution vectors.

We choose a path relinking as a combination method
consisting of
determining a match between servers,
this match can be
\begin{itemize}
\item Perfect Matching:
  minimizing the distance between paired servers
\item Workload Matching:
  sorting the servers of both solutions
  according to their workload,
  and match them according to these sorted lists.
\item Random Matching
\end{itemize}
Once we have the matching
we proceed from one solution
to interchange each server,
one by one
until the other solution is reached;
in each interchange
we have a new solution.
To make the interchanges
we have three options:
\begin{itemize}
\item Nearest First
\item Farthest First
\item Random
\end{itemize}
\input{HeuristicProcedures/alg_ss-combination}
%\todo[inline]{Hacer mas claro la secuencia y metodos}
